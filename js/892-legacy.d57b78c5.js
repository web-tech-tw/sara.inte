"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[892],{1892:function(e,s,t){t.r(s),t.d(s,{default:function(){return d}});var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"my-8 py-16"},[t("div",{staticClass:"flex justify-center"},[t("div",{staticClass:"flex flex-col"},[t("label",{staticClass:"input-label text-base mb-2"},[e._v(e._s(e.title))]),t("p",{staticClass:"input-label text-base mb-2 text-red-600"},[e._v(e._s(e.statusMessage))]),t("input-modal",{attrs:{loading:e.isLoading,placeholder:e.placeholder,description:e.description},on:{submit:e.submit},model:{value:e.answer,callback:function(s){e.answer=s},expression:"answer"}})],1)]),t("div",{staticClass:"flex justify-center mt-5"},[t("button",{staticClass:"\n        bg-white-500\n        shadow-md\n        text-sm text-black\n        font-bold\n        py-3\n        md:px-8\n        px-4\n        hover:bg-slate-100\n        rounded\n        mr-3\n      ",on:{click:e.cancel}},[e._v(" 取消 ")])])])},a=[],i=t(6198),r=(t(8975),t(4916),t(5306),t(1539),t(8783),t(3948),t(1637),t(3101)),o={name:"ManageEmailView",components:{InputModal:r.Z},data:function(){return{isLoading:!1,statusMessage:"",sessionId:"",answer:""}},computed:{title:function(){return this.sessionId?"請輸入您的轉移代碼：":"請輸入新的電子郵件地址："},placeholder:function(){return this.sessionId?"例如：12345678":"例如：sara@web-tech-tw.github.io"},description:function(){return this.sessionId?"請於您的新的電子郵件信箱收取轉移代碼。":""}},methods:{cancel:function(){this.$router.history.length?this.$router.back():this.$router.replace("/")},submit:function(){this.statusMessage="",this.answer?this.sessionId?this.verify():this.do():this.statusMessage="請輸入資料"},do:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function s(){var t,n,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t=new URLSearchParams,t.set("email",e.answer),e.isLoading=!0,s.prev=3,s.next=6,e.$axios.put("/users/me/email",t);case 6:a=s.sent,null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.session_id?e.sessionId=a.data.session_id:e.statusMessage="發生錯誤 (無錯誤代碼)",s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](3),e.statusMessage="發生錯誤 (".concat((null===s.t0||void 0===s.t0||null===(i=s.t0.response)||void 0===i?void 0:i.status)||"無錯誤代碼",")");case 13:return s.prev=13,e.isLoading=!1,s.finish(13);case 16:case"end":return s.stop()}}),s,null,[[3,10,13,16]])})))()},verify:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function s(){var t,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t=new URLSearchParams,t.set("code",e.answer),t.set("session_id",e.sessionId),e.isLoading=!0,s.prev=4,s.next=7,e.$axios.patch("/users/me/email",t);case 7:e.statusMessage="修改成功，正在寫入憑證...",setTimeout((function(){return e.$router.replace("/manage")}),500),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](4),e.statusMessage="發生錯誤 (".concat((null===s.t0||void 0===s.t0||null===(n=s.t0.response)||void 0===n?void 0:n.status)||"無錯誤代碼",")");case 14:return s.prev=14,e.isLoading=!1,s.finish(14);case 17:case"end":return s.stop()}}),s,null,[[4,11,14,17]])})))()}}},u=o,c=t(1001),l=(0,c.Z)(u,n,a,!1,null,null,null),d=l.exports}}]);
//# sourceMappingURL=892-legacy.d57b78c5.js.map