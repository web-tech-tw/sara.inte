"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[498],{8498:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex justify-center my-8 py-16"},[n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"input-label text-base mb-2"},[t._v(t._s(t.title))]),n("p",{staticClass:"input-label text-base mb-2 text-red-600"},[t._v(t._s(t.status))]),n("input-modal",{attrs:{loading:t.loading,placeholder:t.placeholder},on:{submit:t.submit},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1)]),n("div",{staticClass:"flex justify-center mt-5"},[n("button",{staticClass:"bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3",on:{click:t.cancel}},[t._v(" 取消 ")])])])},i=[],a=(n(4916),n(5306),n(1539),n(8783),n(3948),n(1637),n(7637)),o=n(2945),l={name:"HomeView",components:{InputModal:o.Z},props:{email:{type:String,required:!1,default:function(){return null}}},data:function(){return{mode:0,loading:!1,token:"",answer:"",status:""}},computed:{title:function(){return this.token?"請輸入您的註冊代碼：":"請輸入您的暱稱："},placeholder:function(){return this.token?"例如：1234567":"例如：星川 サラ"}},methods:{cancel:function(){this.$router.history.length?this.$router.back():this.$router.replace("/")},submit:function(){this.status="",this.answer?this.token?this.verify():this.do():this.status="請輸入資料"},do:function(){var t=this,e=new URLSearchParams;e.set("email",this.email),e.set("nickname",this.answer),this.loading=!0,this.$axios.post("/register",e).then((function(e){var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.register_token?(t.mode=3,t.loading=!1,t.token=e.data.register_token):(t.loading=!1,t.status="發生錯誤 (無錯誤代碼)")})).catch((function(e){var n,s;410===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)?(t.mode=1,t.loading=!1):(t.loading=!1,t.status="發生錯誤 (".concat((null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.status)||"無錯誤代碼",")"))})).finally((function(){return t.loading=!1}))},verify:function(){var t=this,e=new URLSearchParams;e.set("code",this.answer),e.set("register_token",this.token),this.loading=!0,this.$axios.post("/register/verify",e).then((function(e){var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.token?(t.status="註冊成功，憑證登錄中...",localStorage.setItem("unified_token",e.data.token),(0,a.uX)()):(t.loading=!1,t.status="發生錯誤 (無錯誤代碼)")})).catch((function(e){var n;t.loading=!1,t.status="發生錯誤 (".concat((null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)||"無錯誤代碼",")")})).finally((function(){return t.loading=!1}))}},created:function(){null===this.email&&this.$router.replace("/")}},r=l,u=n(1001),c=(0,u.Z)(r,s,i,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=498-legacy.47f13c9d.js.map