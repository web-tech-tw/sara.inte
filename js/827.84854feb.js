"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[827],{2827:function(s,t,e){e.r(t),e.d(t,{default:function(){return u}});var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"my-8 py-16"},[e("div",{staticClass:"flex justify-center"},[e("div",{staticClass:"flex flex-col"},[e("label",{staticClass:"input-label text-base mb-2"},[s._v(s._s(s.title))]),e("p",{staticClass:"input-label text-base mb-2 text-red-600"},[s._v(s._s(s.statusMessage))]),e("input-modal",{attrs:{loading:s.isLoading,placeholder:s.placeholder,description:s.description},on:{submit:s.submit},model:{value:s.answer,callback:function(t){s.answer=t},expression:"answer"}})],1)]),e("div",{staticClass:"flex justify-center mt-5"},[e("button",{staticClass:"\n        bg-white-500\n        shadow-md\n        text-sm text-black\n        font-bold\n        py-3\n        md:px-8\n        px-4\n        hover:bg-slate-100\n        rounded\n        mr-3\n      ",on:{click:s.cancel}},[s._v(" 取消 ")])])])},i=[],n=e(3101),l={name:"ManageEmailView",components:{InputModal:n.Z},data:()=>({isLoading:!1,statusMessage:"",sessionId:"",answer:""}),computed:{title(){return this.sessionId?"請輸入您的轉移代碼：":"請輸入新的電子郵件地址："},placeholder(){return this.sessionId?"例如：12345678":"例如：sara@web-tech-tw.github.io"},description(){return this.sessionId?"請於您的新的電子郵件信箱收取轉移代碼。":""}},methods:{cancel(){this.$router.history.length?this.$router.back():this.$router.replace("/")},submit(){this.statusMessage="",this.answer?this.sessionId?this.verify():this.do():this.statusMessage="請輸入資料"},async do(){this.isLoading=!0;try{const s=await this.$axios.put("/users/me/email",{email:this.answer});s?.data?.session_id?this.sessionId=s.data.session_id:this.statusMessage="發生錯誤 (無錯誤代碼)"}catch(s){this.statusMessage=`發生錯誤 (${s?.response?.status||"無錯誤代碼"})`}finally{this.isLoading=!1}},async verify(){this.isLoading=!0;try{await this.$axios.patch("/users/me/email",{code:this.answer,session_id:this.sessionId}),this.statusMessage="修改成功，正在寫入憑證...",setTimeout((()=>this.$router.replace("/manage")),500)}catch(s){this.statusMessage=`發生錯誤 (${s?.response?.status||"無錯誤代碼"})`}finally{this.isLoading=!1}}}},o=l,r=e(1001),c=(0,r.Z)(o,a,i,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=827.84854feb.js.map