"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[616],{5616:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex justify-center my-8 py-16"},[t.profile?a("div",{staticClass:"flex flex-col mx-5 md:mx-auto"},[a("div",{staticClass:"max-w-2xl mx-auto sm:px-6 lg:px-8"},[t.edit?a("div",{staticClass:"overflow-hidden shadow-md"},[a("div",{staticClass:"px-6 py-4 bg-white border-b border-gray-200 font-bold"},[t._v(" 修改個人資料： ")]),a("div",{staticClass:"p-6 bg-white border-b border-gray-200"},[a("div",{staticClass:"flex rounded bg-white"},[a("label",{staticClass:"px-4 py-1 text-gray-600",attrs:{for:"nickname"}},[t._v("暱稱：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.field.nickname,expression:"field.nickname"}],staticClass:"border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none",attrs:{id:"nickname",placeholder:"例如：星川 サラ",type:"text"},domProps:{value:t.field.nickname},on:{input:function(e){e.target.composing||t.$set(t.field,"nickname",e.target.value)}}})])]),a("div",{staticClass:"p-6 bg-white border-b border-gray-200"},[t._v(" 若要修改電子郵件地址，請點 "),a("router-link",{staticClass:"text-amber-900",attrs:{to:"/manage/email"}},[t._v("此處")]),t._v(" 。 ")],1),a("div",{staticClass:"p-6 bg-white border-gray-200 text-right"},[a("button",{staticClass:"bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3",on:{click:function(e){t.edit=!1}}},[t._v(" 取消 ")]),a("button",{staticClass:"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded",on:{click:t.update}},[t._v(" 確定修改 ")])])]):a("div",{staticClass:"overflow-hidden shadow-md"},[a("div",{staticClass:"px-6 py-4 bg-white border-b border-gray-200 font-bold"},[t._v(" 您好，"+t._s(t.profile.nickname)+"，這裡是您的個人資料： ")]),a("div",{staticClass:"p-6 bg-white border-b border-gray-200"},[a("span",{staticClass:"text-gray-600"},[t._v("暱稱：")]),t._v(t._s(t.profile.nickname)),a("br"),a("span",{staticClass:"text-gray-600"},[t._v("電子郵件地址：")]),t._v(t._s(t.profile.email)),a("br"),a("span",{staticClass:"text-gray-600"},[t._v("Sara系統使用者識別碼：")]),t._v(t._s(t.profile._id)+" ")]),a("div",{staticClass:"p-6 bg-white border-b border-gray-200 text-right"},[a("button",{staticClass:"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded mr-3",on:{click:function(e){t.edit=!0}}},[t._v("修改個人資料 ")]),a("button",{staticClass:"bg-amber-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-amber-600 rounded",on:{click:t.logout}},[t._v("登出 ")])]),t.showRoles?a("div",{staticClass:"p-6 bg-white border-b border-gray-200"},[a("span",{staticClass:"text-gray-600"},[t._v("持有權限：")]),a("ul",{staticClass:"list-disc ml-7"},t._l(t.profile.roles,(function(e,s){return a("li",{key:s},[t._v(" "+t._s(e)+" ")])})),0)]):t._e()])])]):a("div",[t._v(t._s(null===t.profile?"載入中...":"發生錯誤"))])])},r=[],i=a(6198),n=(a(8975),{name:"ManageView",data:function(){return{edit:!1,field:{nickname:""},profile:null}},computed:{showRoles:function(){return Array.isArray(this.profile.roles)&&this.profile.roles.length}},methods:{update:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.put("/users/me",{nickname:t.field.nickname});case 3:t.status="修改成功，正在寫入憑證...",setTimeout((function(){return location.reload()}),500),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.status="發生錯誤 (".concat((null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)||"無錯誤代碼",")");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},logout:function(){localStorage.clear(),location.assign("https://web-tech-tw.github.io")}},created:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$profile();case 2:t.profile=e.sent,t.field.nickname=t.profile.nickname;case 4:case"end":return e.stop()}}),e)})))()}}),o=n,l=a(1001),d=(0,l.Z)(o,s,r,!1,null,null,null),c=d.exports}}]);
//# sourceMappingURL=616-legacy.97e47447.js.map