"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[516],{9516:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-8 py-16"},[a("div",{staticClass:"flex justify-center"},[a("div",{staticClass:"flex flex-col"},[a("label",{staticClass:"input-label text-base mb-2"},[t._v(t._s(t.title))]),a("p",{staticClass:"input-label text-base mb-2 text-red-600"},[t._v(t._s(t.status))]),a("input-modal",{attrs:{loading:t.loading,placeholder:t.placeholder},on:{submit:t.submit},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}}),a("p",{staticClass:"text-base mt-2"},[t._v("請於您的新的電子郵件信箱收取轉移代碼。")])],1)]),a("div",{staticClass:"flex justify-center mt-5"},[a("button",{staticClass:"bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3",on:{click:t.cancel}},[t._v(" 取消 ")])])])},s=[],r=a(6198),i=(a(8975),a(4916),a(5306),a(1539),a(8783),a(3948),a(1637),a(2945)),l={name:"ManageEmailView",components:{InputModal:i.Z},data:function(){return{status:"",token:"",answer:"",loading:!1}},computed:{title:function(){return this.token?"請輸入您的轉移代碼：":"請輸入新的電子郵件地址："},placeholder:function(){return this.token?"例如：12345678":"例如：sara@web-tech-tw.github.io"}},methods:{cancel:function(){this.$router.history.length?this.$router.back():this.$router.replace("/")},submit:function(){this.status="",this.answer?this.token?this.verify():this.do():this.status="請輸入資料"},do:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var a,n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new URLSearchParams,a.set("email",t.answer),t.loading=!0,e.prev=3,e.next=6,t.$axios.put("/profile/email",a);case 6:s=e.sent,null!==s&&void 0!==s&&null!==(n=s.data)&&void 0!==n&&n.update_email_token?t.token=s.data.update_email_token:t.status="發生錯誤 (無錯誤代碼)",e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.status="發生錯誤 (".concat((null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)||"無錯誤代碼",")");case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))()},verify:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new URLSearchParams,a.set("code",t.answer),a.set("update_email_token",t.token),t.loading=!0,e.prev=4,e.next=7,t.$axios.post("/profile/email/verify",a);case 7:t.status="修改成功，正在寫入憑證...",setTimeout((function(){return t.$router.replace("/manage")}),500),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),t.status="發生錯誤 (".concat((null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n?void 0:n.status)||"無錯誤代碼",")");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})))()}}},o=l,u=a(1001),c=(0,u.Z)(o,n,s,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=516-legacy.910f7f88.js.map