{"version":3,"file":"js/95.5fd8b655.js","mappings":"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","sources":["webpack://sara.inte/./src/views/ManageView.vue?8c57","webpack://sara.inte/src/views/ManageView.vue","webpack://sara.inte/./src/views/ManageView.vue?6423","webpack://sara.inte/./src/views/ManageView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex justify-center my-8 py-16\"},[(_vm.profile)?_c('div',{staticClass:\"flex flex-col mx-5 md:mx-auto\"},[_c('div',{staticClass:\"max-w-2xl mx-auto sm:px-6 lg:px-8\"},[(!_vm.edit)?_c('div',{staticClass:\"overflow-hidden shadow-md\"},[_c('div',{staticClass:\"px-6 py-4 bg-white border-b border-gray-200 font-bold\"},[_vm._v(\" 您好，\"+_vm._s(_vm.profile.nickname)+\"，這裡是您的個人資料： \")]),_c('div',{staticClass:\"p-6 bg-white border-b border-gray-200\"},[_c('span',{staticClass:\"text-gray-600\"},[_vm._v(\"暱稱：\")]),_vm._v(_vm._s(_vm.profile.nickname)),_c('br'),_c('span',{staticClass:\"text-gray-600\"},[_vm._v(\"電子郵件地址：\")]),_vm._v(_vm._s(_vm.profile.email)),_c('br'),_c('span',{staticClass:\"text-gray-600\"},[_vm._v(\"Sara系統使用者識別碼：\")]),_vm._v(_vm._s(_vm.profile._id)+\" \")]),_c('div',{staticClass:\"p-6 bg-white border-b border-gray-200 text-right\"},[_c('button',{staticClass:\"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded mr-3\",on:{\"click\":function($event){_vm.edit = true}}},[_vm._v(\"修改個人資料 \")]),_c('button',{staticClass:\"bg-amber-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-amber-600 rounded\",on:{\"click\":_vm.logout}},[_vm._v(\"登出 \")])]),(_vm.showRoles)?_c('div',{staticClass:\"p-6 bg-white border-b border-gray-200\"},[_c('span',{staticClass:\"text-gray-600\"},[_vm._v(\"持有權限：\")]),_c('ul',{staticClass:\"list-disc ml-7\"},_vm._l((_vm.profile.roles),function(i,j){return _c('li',{key:j},[_vm._v(\" \"+_vm._s(i)+\" \")])}),0)]):_vm._e()]):_c('div',{staticClass:\"overflow-hidden shadow-md\"},[_c('div',{staticClass:\"px-6 py-4 bg-white border-b border-gray-200 font-bold\"},[_vm._v(\" 修改個人資料： \")]),_c('div',{staticClass:\"p-6 bg-white border-b border-gray-200\"},[_c('div',{staticClass:\"flex rounded bg-white\"},[_c('label',{staticClass:\"px-4 py-1 text-gray-600\",attrs:{\"for\":\"nickname\"}},[_vm._v(\"暱稱：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.field.nickname),expression:\"field.nickname\"}],staticClass:\"border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none\",attrs:{\"id\":\"nickname\",\"placeholder\":\"例如：星川 サラ\",\"type\":\"text\"},domProps:{\"value\":(_vm.field.nickname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.field, \"nickname\", $event.target.value)}}})])]),_c('div',{staticClass:\"p-6 bg-white border-b border-gray-200\"},[_vm._v(\" 若要修改電子郵件地址，請點 \"),_c('router-link',{staticClass:\"text-amber-900\",attrs:{\"to\":\"/manage/email\"}},[_vm._v(\"此處\")]),_vm._v(\" 。 \")],1),_c('div',{staticClass:\"p-6 bg-white border-gray-200 text-right\"},[_c('button',{staticClass:\"bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3\",on:{\"click\":function($event){_vm.edit = false}}},[_vm._v(\" 取消 \")]),_c('button',{staticClass:\"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded\",on:{\"click\":_vm.update}},[_vm._v(\" 確定修改 \")])])])])]):_c('div',[_vm._v(_vm._s(_vm.profile === null ? \"載入中...\" : \"發生錯誤\"))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flex justify-center my-8 py-16\">\n    <div v-if=\"profile\" class=\"flex flex-col mx-5 md:mx-auto\">\n      <div class=\"max-w-2xl mx-auto sm:px-6 lg:px-8\">\n        <div v-if=\"!edit\" class=\"overflow-hidden shadow-md\">\n          <div class=\"px-6 py-4 bg-white border-b border-gray-200 font-bold\">\n            您好，{{ profile.nickname }}，這裡是您的個人資料：\n          </div>\n          <div class=\"p-6 bg-white border-b border-gray-200\">\n            <span class=\"text-gray-600\">暱稱：</span>{{ profile.nickname }}<br/>\n            <span class=\"text-gray-600\">電子郵件地址：</span>{{ profile.email }}<br/>\n            <span class=\"text-gray-600\">Sara系統使用者識別碼：</span>{{ profile._id }}\n          </div>\n          <div class=\"p-6 bg-white border-b border-gray-200 text-right\">\n            <button\n                class=\"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded mr-3\"\n                @click=\"edit = true\">修改個人資料\n            </button>\n            <button\n                class=\"bg-amber-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-amber-600 rounded\"\n                @click=\"logout\">登出\n            </button>\n          </div>\n          <div v-if=\"showRoles\" class=\"p-6 bg-white border-b border-gray-200\">\n            <span class=\"text-gray-600\">持有權限：</span>\n            <ul class=\"list-disc ml-7\">\n              <li v-for=\"(i, j) in profile.roles\" :key=\"j\">\n                {{ i }}\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div v-else class=\"overflow-hidden shadow-md\">\n          <div class=\"px-6 py-4 bg-white border-b border-gray-200 font-bold\">\n            修改個人資料：\n          </div>\n          <div class=\"p-6 bg-white border-b border-gray-200\">\n            <div class=\"flex rounded bg-white\">\n              <label class=\"px-4 py-1 text-gray-600\" for=\"nickname\">暱稱：</label>\n              <input\n                  id=\"nickname\"\n                  v-model=\"field.nickname\"\n                  class=\"border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none\"\n                  placeholder=\"例如：星川 サラ\"\n                  type=\"text\"\n              >\n            </div>\n          </div>\n          <div class=\"p-6 bg-white border-b border-gray-200\">\n            若要修改電子郵件地址，請點\n            <router-link class=\"text-amber-900\" to=\"/manage/email\">此處</router-link>\n            。\n          </div>\n          <div class=\"p-6 bg-white border-gray-200 text-right\">\n            <button\n                class=\"bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3\"\n                @click=\"edit = false\"\n            >\n              取消\n            </button>\n            <button\n                class=\"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded\"\n                @click=\"update\"\n            >\n              確定修改\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-else>{{ profile === null ? \"載入中...\" : \"發生錯誤\" }}</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ManageView',\n  data: () => ({\n    edit: false,\n    field: {\n      nickname: ''\n    },\n    profile: null\n  }),\n  computed: {\n    showRoles() {\n      return Array.isArray(this.profile.roles) &&\n          this.profile.roles.length\n    }\n  },\n  methods: {\n    update() {\n      const form = new URLSearchParams();\n      form.set('nickname', this.field.nickname);\n      try {\n        this.$axios.put('/profile', form)\n        this.status = '修改成功，正在寫入憑證...';\n        setTimeout(() => location.reload(), 500);\n      } catch (e) {\n        this.status = `發生錯誤 (${e?.response?.status || '無錯誤代碼'})`;\n      }\n    },\n    logout() {\n      localStorage.clear();\n      location.assign(process.env.VUE_APP_WEBSITE_URL)\n    }\n  },\n  async created() {\n    this.profile = await this.$profile();\n    this.field.nickname = this.profile.nickname;\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ManageView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ManageView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManageView.vue?vue&type=template&id=1706408c&\"\nimport script from \"./ManageView.vue?vue&type=script&lang=js&\"\nexport * from \"./ManageView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","edit","_v","attrs","directives","name","rawName","value","field","expression","domProps","on","$event","target","composing","$set","update","_s","profile","nickname","email","_id","logout","_l","i","j","key","_e","staticRenderFns","data","computed","showRoles","Array","isArray","roles","methods","form","URLSearchParams","set","$axios","put","status","setTimeout","location","reload","e","response","localStorage","clear","assign","async","$profile","component"],"sourceRoot":""}