"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[461],{6461:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"flex justify-center my-8 py-16"},[n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"input-label text-base mb-2"},[t._v(t._s(t.title))]),n("p",{staticClass:"input-label text-base mb-2 text-red-600"},[t._v(t._s(t.status))]),n("input-modal",{attrs:{loading:t.loading,placeholder:t.placeholder,description:t.description},on:{submit:t.submit},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1)]),n("div",{staticClass:"flex justify-center mt-5"},[n("button",{staticClass:"\n        bg-white-500\n        shadow-md\n        text-sm text-black\n        font-bold\n        py-3\n        md:px-8\n        px-4\n        hover:bg-slate-100\n        rounded\n        mr-3\n      ",on:{click:t.cancel}},[t._v(" 取消 ")])])])},r=[],a=n(6198),i=(n(8975),n(4916),n(5306),n(1539),n(8783),n(3948),n(1637),n(7637)),o=n(3101),l={name:"HomeView",components:{InputModal:o.Z},props:{email:{type:String,required:!1,default:function(){return null}}},data:function(){return{mode:0,loading:!1,token:"",answer:"",status:""}},computed:{title:function(){return this.token?"請輸入您的註冊代碼：":"請輸入您的暱稱："},placeholder:function(){return this.token?"例如：1234567":"例如：星川 サラ"},description:function(){return this.token?"請於您的電子郵件信箱收取註冊代碼。":""}},methods:{cancel:function(){this.$router.history.length?this.$router.back():this.$router.replace("/")},submit:function(){this.status="",this.answer?this.token?this.verify():this.do():this.status="請輸入資料"},do:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){var n,s,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new URLSearchParams,n.set("email",t.email),n.set("nickname",t.answer),t.loading=!0,e.prev=4,e.next=7,t.$axios.post("/register",n);case 7:r=e.sent,null!==r&&void 0!==r&&null!==(s=r.data)&&void 0!==s&&s.register_token?(t.mode=3,t.token=r.data.register_token):t.status="發生錯誤 (無錯誤代碼)",e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),410===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)?t.mode=1:t.status="發生錯誤 (".concat((null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i?void 0:i.status)||"無錯誤代碼",")");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})))()},verify:function(){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new URLSearchParams,n.set("code",t.answer),n.set("register_token",t.token),t.loading=!0,e.prev=4,e.next=7,t.$axios.post("/register/verify",n);case 7:t.status="註冊成功，正在寫入憑證...",(0,i.x4)(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),t.status="發生錯誤 (".concat((null===e.t0||void 0===e.t0||null===(s=e.t0.response)||void 0===s?void 0:s.status)||"無錯誤代碼",")");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})))()}},created:function(){null===this.email&&this.$router.replace("/")}},u=l,c=n(1001),d=(0,c.Z)(u,s,r,!1,null,null,null),p=d.exports}}]);
//# sourceMappingURL=461-legacy.4fc81796.js.map