"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[222],{5222:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex justify-center my-8 py-16"},[s("div",{staticClass:"flex flex-col"},[s("label",{staticClass:"input-label text-base mb-2"},[t._v(t._s(t.title))]),s("p",{staticClass:"input-label text-base mb-2 text-red-600"},[t._v(t._s(t.status))]),s("input-modal",{attrs:{placeholder:t.placeholder,loading:t.loading},on:{submit:t.submit},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1)])},i=[],n=s(2945),l={name:"HomeView",components:{InputModal:n.Z},props:{email:{type:String,required:!1,default:()=>null}},data:()=>({mode:0,loading:!1,token:"",answer:"",status:""}),computed:{title(){return this.token?"請輸入您的註冊代碼：":"請輸入您的暱稱："},placeholder(){return this.token?"例如：1234567":"例如：星川 サラ"}},methods:{submit(){this.answer&&(this.token?this.verify():this.do())},do(){const t=new URLSearchParams;t.set("email",this.email),t.set("nickname",this.answer),this.loading=!0,this.$axios.post("/register",t).then((t=>{t?.data?.register_token?(this.mode=3,this.loading=!1,this.token=t.data.register_token):(this.loading=!1,this.status="發生錯誤 (無錯誤代碼)")})).catch((t=>{410===t?.response?.status?(this.mode=1,this.loading=!1):(this.loading=!1,this.status=`發生錯誤 (${t?.response?.status})`)})).finally((()=>this.loading=!1))},verify(){const t=new URLSearchParams;t.set("code",this.answer),t.set("register_token",this.token),this.loading=!0,this.$axios.post("/register/verify",t).then((t=>{t?.data?.token?(this.status="成功註冊，憑證登錄中...",localStorage.setItem("unified_token",t.data.token),setTimeout((()=>location.replace("https://web-tech-tw.github.io")),500)):(this.loading=!1,this.status="發生錯誤 (無錯誤代碼)")})).catch((t=>{this.loading=!1,this.status=`發生錯誤 (${t?.response?.status||"無錯誤代碼"})`})).finally((()=>this.loading=!1))}},created(){null===this.email&&this.$router.replace("/")}},o=l,r=s(1001),h=(0,r.Z)(o,a,i,!1,null,null,null),u=h.exports}}]);
//# sourceMappingURL=222.40700db3.js.map