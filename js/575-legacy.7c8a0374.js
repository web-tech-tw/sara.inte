"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[575],{575:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"my-8 py-16"},[n("div",{staticClass:"flex justify-center"},[n("div",{staticClass:"flex flex-col"},[n("label",{staticClass:"input-label text-base mb-2"},[t._v(t._s(t.title))]),n("p",{staticClass:"input-label text-base mb-2 text-red-600"},[t._v(t._s(t.status))]),n("input-modal",{attrs:{loading:t.loading,placeholder:t.placeholder,description:t.description},on:{submit:t.submit},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}})],1)]),n("div",{staticClass:"flex justify-center mt-5"},[n("button",{staticClass:"\n        bg-white-500\n        shadow-md\n        text-sm text-black\n        font-bold\n        py-3\n        md:px-8\n        px-4\n        hover:bg-slate-100\n        rounded\n        mr-3\n      ",on:{click:t.cancel}},[t._v(" 取消 ")])])])},s=[],r=n(6198),i=(n(8975),n(4916),n(5306),n(1539),n(8783),n(3948),n(1637),n(3101)),o={name:"ManageEmailView",components:{InputModal:i.Z},data:function(){return{status:"",token:"",answer:"",loading:!1}},computed:{title:function(){return this.token?"請輸入您的轉移代碼：":"請輸入新的電子郵件地址："},placeholder:function(){return this.token?"例如：12345678":"例如：sara@web-tech-tw.github.io"},description:function(){return this.token?"請於您的新的電子郵件信箱收取轉移代碼。":""}},methods:{cancel:function(){this.$router.history.length?this.$router.back():this.$router.replace("/")},submit:function(){this.status="",this.answer?this.token?this.verify():this.do():this.status="請輸入資料"},do:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var n,a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new URLSearchParams,n.set("email",t.answer),t.loading=!0,e.prev=3,e.next=6,t.$axios.put("/profile/email",n);case 6:s=e.sent,null!==s&&void 0!==s&&null!==(a=s.data)&&void 0!==a&&a.update_email_token?t.token=s.data.update_email_token:t.status="發生錯誤 (無錯誤代碼)",e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),t.status="發生錯誤 (".concat((null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)||"無錯誤代碼",")");case 13:return e.prev=13,t.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})))()},verify:function(){var t=this;return(0,r.Z)(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new URLSearchParams,n.set("code",t.answer),n.set("update_email_token",t.token),t.loading=!0,e.prev=4,e.next=7,t.$axios.post("/profile/email/verify",n);case 7:t.status="修改成功，正在寫入憑證...",setTimeout((function(){return t.$router.replace("/manage")}),500),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),t.status="發生錯誤 (".concat((null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)||"無錯誤代碼",")");case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[4,11,14,17]])})))()}}},u=o,l=n(1001),c=(0,l.Z)(u,a,s,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=575-legacy.7c8a0374.js.map