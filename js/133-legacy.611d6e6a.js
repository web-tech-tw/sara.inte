(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[133],{2133:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return b}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex justify-center my-8 py-16"},[n("div",{staticClass:"flex flex-col mx-5 md:mx-auto"},[n("div",{staticClass:"max-w-2xl mx-auto sm:px-6 lg:px-8"},[t.edit?n("div",{staticClass:"overflow-hidden shadow-md"},[n("div",{staticClass:"px-6 py-4 bg-white border-b border-gray-200 font-bold"},[t._v(" 修改個人資料： ")]),n("div",{staticClass:"p-6 bg-white border-b border-gray-200"},[n("div",{staticClass:"flex rounded bg-white"},[n("label",{staticClass:"px-4 py-1 text-gray-600",attrs:{for:"nickname"}},[t._v("暱稱：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.field.nickname,expression:"field.nickname"}],staticClass:"border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none",attrs:{id:"nickname",placeholder:"暱稱",type:"text"},domProps:{value:t.field.nickname},on:{input:function(e){e.target.composing||t.$set(t.field,"nickname",e.target.value)}}})])]),n("div",{staticClass:"p-6 bg-white border-b border-gray-200"},[t._v(" 若要修改電子郵件地址，請點 "),n("router-link",{staticClass:"text-amber-900",attrs:{to:"/manage/email"}},[t._v("此處")]),t._v(" 。 ")],1),n("div",{staticClass:"p-6 bg-white border-gray-200 text-right"},[n("button",{staticClass:"bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-white-600 rounded mr-3",on:{click:function(e){t.edit=!1}}},[t._v("取消 ")]),n("button",{staticClass:"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded",on:{click:t.update}},[t._v("確定修改 ")])])]):n("div",{staticClass:"overflow-hidden shadow-md"},[n("div",{staticClass:"px-6 py-4 bg-white border-b border-gray-200 font-bold"},[t._v(" 您好，"+t._s(t.profile.nickname)+"，這裡是您的個人資料： ")]),n("div",{staticClass:"p-6 bg-white border-b border-gray-200"},[n("span",{staticClass:"text-gray-600"},[t._v("暱稱：")]),t._v(t._s(t.profile.nickname)),n("br"),n("span",{staticClass:"text-gray-600"},[t._v("電子郵件地址：")]),t._v(t._s(t.profile.email)),n("br"),n("span",{staticClass:"text-gray-600"},[t._v("Sara系統使用者識別碼：")]),t._v(t._s(t.profile._id)+" ")]),n("div",{staticClass:"p-6 bg-white border-gray-200 text-right"},[n("button",{staticClass:"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded mr-3",on:{click:function(e){t.edit=!0}}},[t._v("修改個人資料 ")]),n("button",{staticClass:"bg-amber-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-amber-600 rounded",on:{click:t.logout}},[t._v("登出 ")])])])])])])},r=[];n(1539),n(8783),n(3948),n(1637),n(1703),n(8309),n(5505),n(7714),n(2801),n(1174),n(4916),n(5306),n(9714),n(3123);function o(t){this.message=t}o.prototype=new Error,o.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new o("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,a,r=0,i=0,s="";a=e.charAt(i++);~a&&(n=r%4?64*n+a:a,r++%4)?s+=String.fromCharCode(255&n>>(-2*r&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return s};function s(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(i(t).replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return i(e)}}function l(t){this.message=t}function d(t,e){if("string"!=typeof t)throw new l("Invalid token specified");var n=!0===(e=e||{}).header?0:1;try{return JSON.parse(s(t.split(".")[n]))}catch(t){throw new l("Invalid token specified: "+t.message)}}l.prototype=new Error,l.prototype.name="InvalidTokenError";var c=d,u={name:"ManageView",data:function(){return{edit:!1,field:{nickname:""}}},computed:{profile:function(){var t=localStorage.getItem("unified_token");if(!t)return!1;var e=c(t);return(null===e||void 0===e?void 0:e.user)||null},authOptions:function(){return{headers:{Authorization:localStorage.getItem("unified_token")}}}},methods:{update:function(){var t=this,e=new URLSearchParams;e.set("nickname",this.field.nickname),this.$axios.put("/profile",e,this.authOptions).then((function(e){var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.token?(t.status="修改成功，正在更新憑證...",localStorage.setItem("unified_token",e.data.token),setTimeout((function(){return location.reload()}),500)):t.status="發生錯誤 (無錯誤代碼)"})).catch((function(e){var n;t.status="發生錯誤 (".concat((null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)||"無錯誤代碼",")")}))},logout:function(){localStorage.clear(),location.assign("https://web-tech-tw.github.io")}},mounted:function(){this.field.nickname=this.profile.nickname}},f=u,p=n(1001),h=(0,p.Z)(f,a,r,!1,null,null,null),b=h.exports},4170:function(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n={},a=0;a<66;a++)n[e.charAt(a)]=a;t.exports={itoc:e,ctoi:n}},5505:function(t,e,n){var a=n(2109),r=n(5005),o=n(1702),i=n(7293),s=n(1340),l=n(2597),d=n(8053),c=n(4170).ctoi,u=/[^\d+/a-z]/i,f=/[\t\n\f\r ]+/g,p=/[=]+$/,h=r("atob"),b=String.fromCharCode,g=o("".charAt),v=o("".replace),m=o(u.exec),w=i((function(){return""!==atob(" ")})),x=!w&&!i((function(){h()}));a({global:!0,enumerable:!0,forced:w||x},{atob:function(t){if(d(arguments.length,1),x)return h(t);var e,n,a=v(s(t),f,""),o="",i=0,w=0;if(a.length%4==0&&(a=v(a,p,"")),a.length%4==1||m(u,a))throw new(r("DOMException"))("The string is not correctly encoded","InvalidCharacterError");while(e=g(a,i++))l(c,e)&&(n=w%4?64*n+c[e]:c[e],w++%4&&(o+=b(255&n>>(-2*w&6))));return o}})}}]);
//# sourceMappingURL=133-legacy.611d6e6a.js.map