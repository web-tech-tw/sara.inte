"use strict";(self["webpackChunksara_inte"]=self["webpackChunksara_inte"]||[]).push([[813],{813:function(s,t,e){e.r(t),e.d(t,{default:function(){return d}});var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"my-8 py-16"},[e("div",{staticClass:"flex justify-center"},[e("div",{staticClass:"flex flex-col"},[e("label",{staticClass:"input-label text-base mb-2"},[s._v(s._s(s.title))]),e("p",{staticClass:"input-label text-base mb-2 text-red-600"},[s._v(s._s(s.statusMessage))]),e("input-modal",{attrs:{loading:s.isLoading,placeholder:s.placeholder,description:s.description},on:{submit:s.submit},model:{value:s.answer,callback:function(t){s.answer=t},expression:"answer"}})],1)]),e("div",{staticClass:"flex justify-center mt-5"},[e("button",{staticClass:"\n        bg-white-500\n        shadow-md\n        text-sm text-black\n        font-bold\n        py-3\n        md:px-8\n        px-4\n        hover:bg-slate-100\n        rounded\n        mr-3\n      ",on:{click:s.cancel}},[s._v(" 取消 ")])])])},i=[],n=e(3101),o={name:"ManageEmailView",components:{InputModal:n.Z},data:()=>({isLoading:!1,statusMessage:"",sessionId:"",answer:""}),computed:{title(){return this.sessionId?"請輸入您的轉移代碼：":"請輸入新的電子郵件地址："},placeholder(){return this.sessionId?"例如：12345678":"例如：sara@web-tech-tw.github.io"},description(){return this.sessionId?"請於您的新的電子郵件信箱收取轉移代碼。":""}},methods:{cancel(){this.$router.history.length?this.$router.back():this.$router.replace("/")},submit(){this.statusMessage="",this.answer?this.sessionId?this.verify():this.do():this.statusMessage="請輸入資料"},async do(){const s=new URLSearchParams;s.set("email",this.answer),this.isLoading=!0;try{const t=await this.$axios.put("/profile/email",s);t?.data?.session_id?this.sessionId=t.data.session_id:this.statusMessage="發生錯誤 (無錯誤代碼)"}catch(t){this.statusMessage=`發生錯誤 (${t?.response?.status||"無錯誤代碼"})`}finally{this.isLoading=!1}},async verify(){const s=new URLSearchParams;s.set("code",this.answer),s.set("session_id",this.sessionId),this.isLoading=!0;try{await this.$axios.post("/profile/email/verify",s),this.statusMessage="修改成功，正在寫入憑證...",setTimeout((()=>this.$router.replace("/manage")),500)}catch(t){this.statusMessage=`發生錯誤 (${t?.response?.status||"無錯誤代碼"})`}finally{this.isLoading=!1}}}},r=o,l=e(1001),c=(0,l.Z)(r,a,i,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=813.721a90be.js.map