import{r as u,c as v,g as y,h as w,o,a,b as e,t as r,i as l,F as k,j as f,k as E,w as T,v as S,d as V,l as I,f as N}from"./index-304ee9d1.js";const A={class:"flex justify-center my-8 py-16"},C={key:0,class:"flex flex-col mx-5 md:mx-auto"},R={class:"max-w-2xl mx-auto sm:px-6 lg:px-8"},D={key:0,class:"overflow-hidden shadow-md"},O={class:"px-6 py-4 bg-white border-b border-gray-200 font-bold"},H={class:"p-6 bg-white border-b border-gray-200"},M=e("span",{class:"text-gray-600"},"暱稱：",-1),B=e("br",null,null,-1),j=e("span",{class:"text-gray-600"},"電子郵件地址：",-1),F=e("br",null,null,-1),L=e("span",{class:"text-gray-600"},"Sara系統使用者識別碼：",-1),U={class:"p-6 bg-white border-b border-gray-200 text-right"},X={key:0,class:"p-6 bg-white border-b border-gray-200"},$=e("span",{class:"text-gray-600"},"持有權限：",-1),K={class:"list-disc ml-7"},P={key:1,class:"overflow-hidden shadow-md"},q=e("div",{class:"px-6 py-4 bg-white border-b border-gray-200 font-bold"}," 修改個人資料： ",-1),z={class:"p-6 bg-white border-b border-gray-200"},G={class:"flex rounded bg-white"},J=e("label",{class:"px-4 py-1 text-gray-600",for:"nickname"},"暱稱：",-1),Q={class:"p-6 bg-white border-b border-gray-200"},W={class:"p-6 bg-white border-gray-200 text-right"},Y={key:1},te={__name:"ManageView",setup(Z){const{VITE_INDEX_INTE_HOST:b}={VITE_INDEX_INTE_HOST:"https://web-tech-tw.github.io",VITE_SARA_INTE_HOST:"https://web-tech-tw.github.io/sara.inte",VITE_SARA_RECV_HOST:"https://web-tech-tw.eu.org/sara.recv",VITE_SARA_TOKEN_NAME:"unified_token",BASE_URL:"/sara.inte",MODE:"production",DEV:!1,PROD:!0,SSR:!1},c=u(!1),d=u({nickname:""}),t=u(null),_=N(),h=v(()=>{var n;return Array.isArray((n=t.value)==null?void 0:n.roles)&&t.value.roles.length}),p=async()=>{await _.put("users/me",{nickname:d.value.nickname}),setTimeout(()=>location.reload(),500)},m=()=>{localStorage.clear(),location.assign(b)};return y(async()=>{try{const s=await(await _.get("users/me")).json();t.value=s.profile,d.value.nickname=s.nickname}catch(n){console.warn(n.message)}}),(n,s)=>{const g=w("router-link");return o(),a("div",A,[t.value?(o(),a("div",C,[e("div",R,[c.value?(o(),a("div",P,[q,e("div",z,[e("div",G,[J,T(e("input",{id:"nickname","onUpdate:modelValue":s[1]||(s[1]=i=>d.value.nickname=i),class:"border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none",placeholder:"例如：星川 サラ",type:"text"},null,512),[[S,d.value.nickname]])])]),e("div",Q,[l(" 若要修改電子郵件地址，請點 "),V(g,{class:"text-amber-900",to:"/manage/email"},{default:I(()=>[l("此處")]),_:1}),l(" 。 ")]),e("div",W,[e("button",{class:"bg-white-500 shadow-md text-sm text-black font-bold py-3 md:px-8 px-4 hover:bg-slate-100 rounded mr-3",onClick:s[2]||(s[2]=i=>c.value=!1)}," 取消 "),e("button",{class:"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded",onClick:p}," 確定修改 ")])])):(o(),a("div",D,[e("div",O," 您好，"+r(t.value.nickname)+"，這裡是您的個人資料： ",1),e("div",H,[M,l(r(t.value.nickname),1),B,j,l(r(t.value.email),1),F,L,l(r(t.value._id),1)]),e("div",U,[e("button",{class:"bg-sky-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-sky-600 rounded mr-3",onClick:s[0]||(s[0]=i=>c.value=!0)},"修改個人資料 "),e("button",{class:"bg-amber-500 shadow-md text-sm text-white font-bold py-3 md:px-8 px-4 hover:bg-amber-600 rounded",onClick:m},"登出 ")]),h.value?(o(),a("div",X,[$,e("ul",K,[(o(!0),a(k,null,f(t.value.roles,(i,x)=>(o(),a("li",{key:x},r(i),1))),128))])])):E("",!0)]))])])):(o(),a("div",Y,r(t.value===null?"載入中...":"發生錯誤"),1))])}}};export{te as default};
